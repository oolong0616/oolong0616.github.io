---
layout:     post  
title:      3、离线安装部署    
subtitle:   笔记：CDH大数据平台实战指南 
date:       2019-06-25  
author:     岑晨  
header-img: 
catalog: true  
tags:  
    - CDH     
    - 笔记     

---

# OS准备

参考：https://oolong0616.github.io/2018/11/19/Centos%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE/
# 资料下载

- Cloudeara Manager：http://archive-primary.cloudera.com/cm5/cm/5／
- CDH：http://archive.cloudera.com/cdh5/parcels/5.11.2.4/
  - 内容：
    - CDH-5.11.2-1.cdh5.11.2.p0.4-el7.parcel
    - CDH-5.11.2-1.cdh5.11.2.p0.4-el7.parcel.sha1 后缀改为sha
    - manifest.json

#  依赖程序安装

## JDK

参考：https://oolong0616.github.io/2018/11/19/Centos%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE/

## MySQL

参考：https://oolong0616.github.io/2018/11/19/Centos%E5%AE%89%E8%A3%85Mysql/

# 配置Hosts

需要对集群内所有机器配置IP及名称的对应关系

- 位置：

  ```bash
  vi /etc/hosts
  ```

- 内容：

  ```bash
  10.10.75.lOO nodeO
  10.10.75.lOO node1
  ```

# 调整Linux参数

- 最大程度使用内存 *

  ```bash
  echo 0 >/proc/sys/vm/swappiness
  echo ”vm. swappiness＝0”>> /etc/sysctl.conf
  echo ” echo 0 > /proc/sys/vm/swappiness ” >>/etc/rc.d/rc.local
  cat /proc/sys/vm/swappiness
  # 0
  ```

- 禁用hugepage透明页

  ```bash
  echo "echo never > /sys/kernel/mm/transparent_hugepage/enabled" >>/etc/rc.d/rc.local
  echo "echo never > /sys/kernel/mm/redhat_transparent_hugepage/defrag">>/etc/rc.d/rc.local
  ```

- 修改 Linux 最大文件句柄数

  ```bash
  echo "* soft nofile 128000" >>/etc/security/limits.conf
  echo "* hard nofile 128000" >>/etc/security/limits.conf
  echo "* soft nproc 128000"  >>/etc/security/limits.conf
  echo "* hard nproc 128000"  >>/etc/security/limits.conf
  sed -i 's/1024/unlimited/' /etc/security/limits.d/20-nproc.conf
  ulimit -SHn 128000
  ulimit -SHu 128000
  ```

- 搭建企业级NTP时间服务器

  


